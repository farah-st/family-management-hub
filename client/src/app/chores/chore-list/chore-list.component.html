<div class="mx-auto max-w-3xl p-4">
  <header class="flex items-center gap-2 mb-4">
    <h1 class="text-2xl font-semibold">Chores</h1>
    <a class="ml-auto px-3 py-2 rounded-xl bg-black text-white" routerLink="new">
      + New
    </a>
  </header>

  <ng-container *ngIf="vm$ | async as vm; else loading">
    <ng-container *ngIf="vm.length; else empty">
      <ul class="grid gap-2">
        <li
          *ngFor="let c of vm; trackBy: trackById"
          class="chore-item"
        >
          <!-- Complete button -->
          <button
            type="button"
            (click)="complete(c)"
            class="done-btn"
          >
            Done
          </button>

          <!-- Main content -->
          <div class="flex-1 min-w-0">
            <!-- Title + due date + priority -->
            <div class="flex items-center gap-2">
              <a [routerLink]="[c.id]" class="chore-title">
                {{ c.title }}
              </a>

              <span
                *ngIf="firstDueDate(c) as due"
                class="ml-2 text-xs text-slate-500"
              >
                Due {{ due | date: 'MMM d' }}
              </span>

              <span class="priority-pill">
                {{ c.priority }}
              </span>
            </div>

            <!-- Assignee + reward row -->
            <div class="mt-1 text-xs text-slate-600 flex flex-wrap gap-2">
              <!-- Assignee -->
              <ng-container *ngIf="c.assignedTo as a">
                <span *ngIf="a.name" class="chore-assignee">
                  Assigned to: {{ a.name }}
                  <span *ngIf="a.role">({{ a.role }})</span>
                </span>
              </ng-container>

              <!-- Reward -->
              <span
                *ngIf="c.rewardAmount && c.rewardAmount > 0"
                class="chore-reward"
              >
                Reward:
                {{ c.rewardAmount | currency : (c.rewardCurrency || 'USD') : 'code' : '1.2-2' }}
              </span>
            </div>
          </div>

          <!-- Delete button -->
          <button
            type="button"
            class="delete-btn"
            (click)="remove(c)"
          >
            Delete
          </button>
        </li>
      </ul>
    </ng-container>
  </ng-container>

  <ng-template #loading>
    <div class="animate-pulse p-3 rounded-xl border">
      Loading choresâ€¦
    </div>
  </ng-template>

  <ng-template #empty>
    <div class="text-center p-6 rounded-xl border">
      <p class="mb-3">No chores yet.</p>
      <a routerLink="new" class="px-3 py-2 rounded-xl border">
        Create your first chore
      </a>
    </div>
  </ng-template>
</div>



