<div class="p-4 max-w-3xl mx-auto">
  <a routerLink="/recipes" class="underline">&larr; Back to recipes</a>

  <ng-container *ngIf="recipe; else notFound">
    <h1 class="text-2xl font-semibold mt-2">{{ recipe.title }}</h1>
    <p class="text-gray-700 mb-4">{{ recipe.description }}</p>

    <div class="mb-4" *ngIf="recipe?.ingredients?.length">
      <h2 class="font-medium">Ingredients</h2>
      <ul class="list-disc ml-6">
        <li *ngFor="let ing of recipe!.ingredients; let i = index">
          <ng-container *ngIf="(ing?.name || ing?.qty); else emptyRow">
            {{ ing.name || 'Unnamed ingredient' }}
            <span *ngIf="ing.qty"> â€“ {{ ing.qty }}</span>
          </ng-container>
          <ng-template #emptyRow>
            <em class="text-gray-500">[blank ingredient {{ i + 1 }}]</em>
          </ng-template>
        </li>
      </ul>
    </div>

    <div class="flex gap-3">
      <a [routerLink]="['/recipes', recipe.id, 'edit']" class="px-3 py-2 rounded-lg border">Edit</a>
      <button (click)="addToGrocery()" class="px-3 py-2 rounded-lg border">Add to grocery list</button>
    </div>
  </ng-container>

  <ng-template #notFound>
    <h1 class="text-xl font-semibold text-red-600 mt-2">Recipe not found</h1>
  </ng-template>
</div>
